var expect  = require("chai").expect;
var request = require("request");
let grabber = require('./../tools/grabber');

//tests for the express server

describe("Multi Sign V2 Tests", function() {

  describe("Multi Sign V2 ETH TEST", function() {

    it("Multi Sign V2 ETH DECODE OK", function() {

      let txData = {
        blockHash: "0x198b4bbcc4a9877782e9d725ef6aa64a5fdefe90e9a95cd41555cdc830948fb9",
        blockNumber: 4453918,
        from: "0x0292a4ad07cb55ad789cc6c23b59735c4f4b4ba9",
        gas: 237054,
        gasPrice: 10600000000,
        hash: "0x3e3017e33a37ed5c308c1f5aaa01335e0eb2ef7150279db9faf9d46549ff2448",
        input: "0x0ae4a58400000000000000000000000000000000000000000000000000000000000000e0000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001e000000000000000000000000000000000000000000000000000000000000002600000000000000000000000008caf7f8087f7268acc12c31ddc4360e05413fb800000000000000000000000000000000000000000000000000214e8348c4f000000000000000000000000000000000000000000000000000000000000000002e00000000000000000000000000000000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000001c000000000000000000000000000000000000000000000000000000000000001c0000000000000000000000000000000000000000000000000000000000000003b111e318957f6b0c631ca17c72a73e3536dbb14100097aa5f63788bf28bc391bdb3af5a87dca3b990ce38e412a0e83347272ad9382d97bef632a20a24a5eb684448cbdaa9b9b8691a5b1eea2acf54251d07be5ac97e85b3ced38a52507f028fe00000000000000000000000000000000000000000000000000000000000000030d4df1a1c2e3e435613515b4471d713ffe9e492672e3d5f4b60f36fffedd7d304f1612c86ffe1a50fdc93ad4d399718d9fbc1956cb7383aaf9e32975602ef49b6f31eb6ca9948f27fe7b3f817292873a9503b23db91e3d9dcd07966fd794046b00000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
        nonce: 25,
        r: "0x3f7e433c927a6a14b9df5678ae0489100663d6abdb50c877da890ea37a54031b",
        s: "0x67c34461208ec1879f4e15d1c91318e60907ad7f7ec95287d4c4329ea4c0d977",
        to: "0x26c231f470c2d079bc763361635a1f9c5d529384",
        transactionIndex: 1,
        v: "0x2c",
        value: 0
      };
      
      grabber.handleTxData(txData);

      expect(txData.amount).to.equal('0x214e8348c4f0000');
      expect(txData.recv).to.equal('0x8caf7f8087f7268acc12c31ddc4360e05413fb80');
      expect(txData.transferType).to.equal(1);
      expect(txData.multiSig).to.equal(true);

    });

  });

});
